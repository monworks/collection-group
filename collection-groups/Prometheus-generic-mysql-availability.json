{
  "name": "io.macaw.feature.generic.prometheus.host.mysql.availability.monitoring",
  "sourceMechanism": "HTTP",
  "collection-target": {
    "target-type": "influx",
    "influx-query": "SELECT assetId, assetLabel, customerId,  \"device-ip\", mysql_global_status_uptime FROM MySQL WHERE assetId='__ASSET_ID__' AND time > now() - 5m",
    "argTypes": [
      "java.lang.String"
    ],
    "args": [
      "__ASSET_ID__"
    ]
  },
  "data-handlers": [
     {
      "id": "io.macaw.feature.generic.prometheus.host.mysql.availability.monitoring.metric.availability.percent",
      "post-collection-type": "custom-script",
     "post-collection-handler": "prometheus_host_mysql_availability.js",
      "table-bindings": {
        "database-name": "MetricFamily",
        "measurement": "availability",
        "field-bindings": [
           {
            "upTime": "sysAvailabilityPercent"
          }
        ],
        "tag-bindings": [
          {
            "deviceIP": "deviceIP"
          }
        ]
      }
    }
  ]
}